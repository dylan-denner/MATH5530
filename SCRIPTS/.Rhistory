knit_print.data.frame <- lemon_print
library(tidycensus)
poverty_by_sex_edu_attainment <- get_acs(
geography = "school district (unified)",
variables = c(total_population = "B17003_001",
below_poverty_num = "B17003_002",
below_poverty_num_men = "B17003_003",
M_below_poverty_less_than_HS = "B17003_004",
M_below_poverty_HS = "B17003_005",
M_below_poverty_some_college = "B17003_006",
M_below_poverty_bachelor_plus = "B17003_007",
below_poverty_num_women = "B17003_008",
W_below_poverty_less_than_HS = "B17003_009",
W_below_poverty_HS = "B17003_010",
W_below_poverty_some_college = "B17003_011",
W_below_poverty_bachelor_plus = "B17003_012",
above_poverty_num = "B17003_013",
above_poverty_num_men = "B17003_014",
M_above_poverty_less_than_HS = "B17003_015",
M_above_poverty_HS = "B17003_016",
M_above_poverty_some_college = "B17003_017",
M_above_poverty_bachelor_plus = "B17003_018",
above_poverty_num_women = "B17003_019",
W_above_poverty_less_than_HS = "B17003_020",
W_above_poverty_HS = "B17003_021",
W_above_poverty_some_college = "B17003_022",
W_above_poverty_bachelor_plus = "B17003_023"),
state = "OH",
year = 2019)
#head(poverty_by_sex_edu_attainment)
dim(poverty_by_sex_edu_attainment)
length(unique(poverty_by_sex_edu_attainment$NAME))
head(poverty_by_sex_edu_attainment)
dim(poverty_by_sex_edu_attainment)
length(unique(poverty_by_sex_edu_attainment$NAME))
install.packages("lemon")
install.packages("lemon")
knitr::opts_chunk$set(echo = TRUE)
kable(head(poverty_by_sex_edu_attainment))
setwd("C:/Users/dylan/Documents/R/MATH5530/Project/MATH5530/SCRIPTS/")
library(dplyr)
library(tidycensus)
library(tidyverse)
library(tidyr)
library(readxl)
library(lemon)
knit_print.data.frame <- lemon_print
library(tidycensus)
poverty_by_sex_edu_attainment <- get_acs(
geography = "school district (unified)",
variables = c(total_population = "B17003_001",
below_poverty_num = "B17003_002",
below_poverty_num_men = "B17003_003",
M_below_poverty_less_than_HS = "B17003_004",
M_below_poverty_HS = "B17003_005",
M_below_poverty_some_college = "B17003_006",
M_below_poverty_bachelor_plus = "B17003_007",
below_poverty_num_women = "B17003_008",
W_below_poverty_less_than_HS = "B17003_009",
W_below_poverty_HS = "B17003_010",
W_below_poverty_some_college = "B17003_011",
W_below_poverty_bachelor_plus = "B17003_012",
above_poverty_num = "B17003_013",
above_poverty_num_men = "B17003_014",
M_above_poverty_less_than_HS = "B17003_015",
M_above_poverty_HS = "B17003_016",
M_above_poverty_some_college = "B17003_017",
M_above_poverty_bachelor_plus = "B17003_018",
above_poverty_num_women = "B17003_019",
W_above_poverty_less_than_HS = "B17003_020",
W_above_poverty_HS = "B17003_021",
W_above_poverty_some_college = "B17003_022",
W_above_poverty_bachelor_plus = "B17003_023"),
state = "OH",
year = 2019)
kable(head(poverty_by_sex_edu_attainment))
install.packages("kableExtra")
library(kableExtra)
kbl(poverty_by_sex_edu_attainment) %>%
kable_styling(bootstrap_options = c("striped", "hover"))
kable(head(poverty_by_sex_edu_attainment))
head(poverty_by_sex_edu_attainment)
dim(poverty_by_sex_edu_attainment)
length(unique(poverty_by_sex_edu_attainment$NAME))
###################################################################
#
#   MATH 5530
#
#   Dylan Denner & Jackson Tucker
#   dd575213@ohio.edu & jt070017@ohio.edu
#   03/24/2021
#
#   Overview:
#   Getting first dataset from ACS.
#   Poverty by sex by edu attainment
#
###################################################################
# Working directory
setwd("C:/Users/dylan/Documents/R/MATH5530/Project/MATH5530/SCRIPTS/")
###################################################################
# Start program run time
start.time <- Sys.time()
###################################################################
# Libraries needed for analysis
library(dplyr)
library(tidycensus)
library(tidyverse)
library(tidyr)
library(readxl)
###################################################################
# Getting data from ACS
poverty_by_sex_edu_attainment <- get_acs(
geography = "school district (unified)",
variables = c(total_population = "B17003_001",
below_poverty_num = "B17003_002",
below_poverty_num_men = "B17003_003",
M_below_poverty_less_than_HS = "B17003_004",
M_below_poverty_HS = "B17003_005",
M_below_poverty_some_college = "B17003_006",
M_below_poverty_bachelor_plus = "B17003_007",
below_poverty_num_women = "B17003_008",
W_below_poverty_less_than_HS = "B17003_009",
W_below_poverty_HS = "B17003_010",
W_below_poverty_some_college = "B17003_011",
W_below_poverty_bachelor_plus = "B17003_012",
above_poverty_num = "B17003_013",
above_poverty_num_men = "B17003_014",
M_above_poverty_less_than_HS = "B17003_015",
M_above_poverty_HS = "B17003_016",
M_above_poverty_some_college = "B17003_017",
M_above_poverty_bachelor_plus = "B17003_018",
above_poverty_num_women = "B17003_019",
W_above_poverty_less_than_HS = "B17003_020",
W_above_poverty_HS = "B17003_021",
W_above_poverty_some_college = "B17003_022",
W_above_poverty_bachelor_plus = "B17003_023"),
state = "OH",
year = 2019)
poverty_by_sex_edu_attainment <- select(
poverty_by_sex_edu_attainment,
-"moe",
-"GEOID"
)
poverty_by_sex_edu_attainment <- spread(poverty_by_sex_edu_attainment, variable, estimate)
mod_poverty_by_sex_edu_attainment <- poverty_by_sex_edu_attainment %>% mutate(
"tot_less_than_HS" = W_below_poverty_less_than_HS + M_below_poverty_less_than_HS + W_above_poverty_less_than_HS + M_above_poverty_less_than_HS,
"tot_HS" = W_below_poverty_HS + M_below_poverty_HS + W_above_poverty_HS + M_above_poverty_HS,
"tot_some_college" = W_below_poverty_some_college + M_below_poverty_some_college + W_above_poverty_some_college + M_above_poverty_some_college,
"tot_bachelor_plus" = W_below_poverty_bachelor_plus + M_below_poverty_bachelor_plus + W_above_poverty_bachelor_plus + M_above_poverty_bachelor_plus,
"tot_HS_PLUS" = tot_HS + tot_some_college + tot_bachelor_plus,
"poverty_percentage" = below_poverty_num/total_population,
"HS_PLUS_percentage" = tot_HS_PLUS/total_population)
mod_poverty_by_sex_edu_attainment <- select(
mod_poverty_by_sex_edu_attainment,
NAME,
total_population,
below_poverty_num,
above_poverty_num,
poverty_percentage,
tot_less_than_HS,
tot_HS,
tot_some_college,
tot_bachelor_plus,
HS_PLUS_percentage
)
View(poverty_by_sex_edu_attainment)
mod_poverty_by_sex_edu_attainment <- poverty_by_sex_edu_attainment %>% mutate(
"tot_less_than_HS" = W_below_poverty_less_than_HS + M_below_poverty_less_than_HS +
W_above_poverty_less_than_HS + M_above_poverty_less_than_HS,
"tot_HS" = W_below_poverty_HS + M_below_poverty_HS +
W_above_poverty_HS + M_above_poverty_HS,
"tot_some_college" = W_below_poverty_some_college + M_below_poverty_some_college +
W_above_poverty_some_college + M_above_poverty_some_college,
"tot_bachelor_plus" = W_below_poverty_bachelor_plus + M_below_poverty_bachelor_plus +
W_above_poverty_bachelor_plus + M_above_poverty_bachelor_plus,
"tot_HS_PLUS" = tot_HS + tot_some_college + tot_bachelor_plus,
"poverty_percentage" = below_poverty_num/total_population,
"HS_PLUS_percentage" = tot_HS_PLUS/total_population)
source('~/R/MATH5530/Project/MATH5530/SCRIPTS/DataProcessing.R')
View(mod_poverty_by_sex_edu_attainment)
source('~/R/MATH5530/Project/MATH5530/SCRIPTS/AddingCountyRegion.R')
View(grouped_df)
###################################################################
#
#   MATH 5530
#
#   Dylan Denner & Jackson Tucker
#   dd575213@ohio.edu & jt070017@ohio.edu
#   03/24/2021
#
#   Overview:
#   Adding county and region from Ohio dataset
#
###################################################################
# Working directory
setwd("C:/Users/dylan/Documents/R/MATH5530/Project/MATH5530/SCRIPTS/")
###################################################################
# Start program run time
start.time <- Sys.time()
###################################################################
# Libraries needed for analysis
library(dplyr)
library(tidycensus)
library(tidyverse)
library(tidyr)
library(readxl)
###################################################################
# Getting data
file_path <- "../DATA/BUILDING_OVERVIEW_1819.xlsx"
overview_data <- read_excel(file_path, sheet = "BUILDING_OVERVIEW")
file_path <- "../DATA/BUILDING_DISCIPLINE_1819.xlsx"
discipline_data <- read_excel(file_path, sheet = "DISCIPLINE")
###################################################################
# Formatting columns
overview_data <- select(
overview_data,
"Building IRN",
"Building Name",
"District Name",
"County",
"Region",
"Enrollment 2018-2019",
"Attendance Rate 2018-2019",
"Chronic Absenteeism Percent 2018-2019"
)
overview_data[,6:8] <- sapply(overview_data[,6:8],as.numeric)
discipline_data[ discipline_data == "<10" ] <- "0"
discipline_data[,8:26] <- sapply(discipline_data[,8:26],as.numeric)
discipline_data <- discipline_data[,-26]
discipline_data <- subset(discipline_data, discipline_data$`Discpline Reason Description` == "Disobedient/Disruptive Behavior")
discipline_data <- select(
discipline_data,
"Building IRN",
"Students Disciplined - Expulsions",
"Students Disciplined - Out-of-School Suspensions",
"Students Disciplined - In-School Suspensions"
)
discipline_data <- discipline_data %>% mutate(
"total_students_discipline" = (rowSums(discipline_data[,2:4])))
View(discipline_data)
View(overview_data)
###################################################################
#
#   MATH 5530
#
#   Dylan Denner & Jackson Tucker
#   dd575213@ohio.edu & jt070017@ohio.edu
#   03/24/2021
#
#   Overview:
#   Adding county and region from Ohio dataset
#
###################################################################
# Working directory
setwd("C:/Users/dylan/Documents/R/MATH5530/Project/MATH5530/SCRIPTS/")
###################################################################
# Start program run time
start.time <- Sys.time()
###################################################################
# Libraries needed for analysis
library(dplyr)
library(tidycensus)
library(tidyverse)
library(tidyr)
library(readxl)
###################################################################
# Getting data
file_path <- "../DATA/BUILDING_OVERVIEW_1819.xlsx"
overview_data <- read_excel(file_path, sheet = "BUILDING_OVERVIEW")
file_path <- "../DATA/BUILDING_DISCIPLINE_1819.xlsx"
discipline_data <- read_excel(file_path, sheet = "DISCIPLINE")
###################################################################
# Formatting columns
overview_data <- select(
overview_data,
"Building IRN",
"Building Name",
"District Name",
"County",
"Region",
"Enrollment 2018-2019",
"Attendance Rate 2018-2019",
"Chronic Absenteeism Percent 2018-2019"
)
overview_data[,6:8] <- sapply(overview_data[,6:8],as.numeric)
discipline_data[ discipline_data == "<10" ] <- "0"
discipline_data[,8:26] <- sapply(discipline_data[,8:26],as.numeric)
discipline_data <- discipline_data[,-26]
discipline_data <- subset(discipline_data, discipline_data$`Discpline Reason Description` == "Disobedient/Disruptive Behavior")
discipline_data <- select(
discipline_data,
"Building IRN",
"Students Disciplined - Expulsions",
"Students Disciplined - Out-of-School Suspensions",
"Students Disciplined - In-School Suspensions"
)
discipline_data <- discipline_data %>% mutate(
"total_students_discipline" = (rowSums(discipline_data[,2:4])))
joined_df <- left_join(overview_data, discipline_data, by = "Building IRN")
###################################################################
#
#   MATH 5530
#
#   Dylan Denner & Jackson Tucker
#   dd575213@ohio.edu & jt070017@ohio.edu
#   03/24/2021
#
#   Overview:
#   Adding county and region from Ohio dataset
#
###################################################################
# Working directory
setwd("C:/Users/dylan/Documents/R/MATH5530/Project/MATH5530/SCRIPTS/")
###################################################################
# Start program run time
start.time <- Sys.time()
###################################################################
# Libraries needed for analysis
library(dplyr)
library(tidycensus)
library(tidyverse)
library(tidyr)
library(readxl)
###################################################################
# Getting data
file_path <- "../DATA/BUILDING_OVERVIEW_1819.xlsx"
overview_data <- read_excel(file_path, sheet = "BUILDING_OVERVIEW")
file_path <- "../DATA/BUILDING_DISCIPLINE_1819.xlsx"
discipline_data <- read_excel(file_path, sheet = "DISCIPLINE")
###################################################################
# Formatting columns
overview_data <- select(
overview_data,
"Building IRN",
"Building Name",
"District Name",
"County",
"Region",
"Enrollment 2018-2019",
"Attendance Rate 2018-2019",
"Chronic Absenteeism Percent 2018-2019"
)
overview_data[,6:8] <- sapply(overview_data[,6:8],as.numeric)
discipline_data[ discipline_data == "<10" ] <- "0"
discipline_data[,8:26] <- sapply(discipline_data[,8:26],as.numeric)
discipline_data <- discipline_data[,-26]
discipline_data <- subset(discipline_data, discipline_data$`Discpline Reason Description` == "Disobedient/Disruptive Behavior")
discipline_data <- select(
discipline_data,
"Building IRN",
"Students Disciplined - Expulsions",
"Students Disciplined - Out-of-School Suspensions",
"Students Disciplined - In-School Suspensions"
)
discipline_data <- discipline_data %>% mutate(
"total_students_discipline" = (rowSums(discipline_data[,2:4])))
joined_df <- left_join(overview_data, discipline_data, by = "Building IRN")
grouped_df <- joined_df %>%
group_by(`District Name`, County, Region) %>%
summarise(mean_enrollment = mean(`Enrollment 2018-2019`, na.rm = TRUE),
mean_attendence = mean(`Attendance Rate 2018-2019`, na.rm = TRUE),
mean_chronic_absenteesim = mean(`Chronic Absenteeism Percent 2018-2019`, na.rm = TRUE),
mean_expulsions = mean(`Students Disciplined - Expulsions`, na.rm = TRUE),
mean_out_of_school_suspensions = mean(`Students Disciplined - Out-of-School Suspensions`, na.rm = TRUE),
mean_in_school_suspensions = mean(`Students Disciplined - In-School Suspensions`, na.rm = TRUE),
mean_total_students_discipline = mean(`total_students_discipline`, na.rm = TRUE))
View(grouped_df)
file_path <- "../DATA/mod_poverty_by_sex_edu_attainment.csv"
ACS_data <- read.csv(file_path)
file_path <- "../DATA/cleaning_districts_and_counties.csv"
cleaned_names <- read.csv(file_path)
View(cleaned_names)
View(ACS_data)
View(joined_df)
grouped_df <- joined_df %>%
group_by(`District Name`, County, Region) %>%
summarise(mean_enrollment = mean(`Enrollment 2018-2019`, na.rm = TRUE),
mean_attendence = mean(`Attendance Rate 2018-2019`, na.rm = TRUE),
mean_chronic_absenteesim = mean(`Chronic Absenteeism Percent 2018-2019`, na.rm = TRUE),
mean_expulsions = mean(`Students Disciplined - Expulsions`, na.rm = TRUE),
mean_out_of_school_suspensions = mean(`Students Disciplined - Out-of-School Suspensions`, na.rm = TRUE),
mean_in_school_suspensions = mean(`Students Disciplined - In-School Suspensions`, na.rm = TRUE),
mean_total_students_discipline = mean(`total_students_discipline`, na.rm = TRUE))
file_path_and_name = "../OUTPUT/grouped_data.csv"
write.csv(grouped_df, file_path_and_name)
View(grouped_df)
file_path <- "../DATA/mod_poverty_by_sex_edu_attainment.csv"
ACS_data <- read.csv(file_path)
file_path <- "../DATA/cleaning_districts_and_counties.csv"
cleaned_names <- read.csv(file_path)
cleaned_names <- cleaned_names[,-5:-12]
cleaned_names <- cleaned_names[,-1:-2]
View(cleaned_names)
names(cleaned_names)[1] <- "NAME"
merged_data <- left_join(ACS_data, cleaned_names, by = "NAME")
View(merged_data)
merged_data <- select(
merged_data,
NAME,
"District_Name.1",
"total_population",
"below_poverty_num",
"above_poverty_num",
"poverty_percentage",
"tot_less_than_HS",
"tot_HS",
"tot_some_college",
"tot_bachelor_plus",
"HS_PLUS_percentage"
)
View(merged_data)
merged_data[,2] <- str_sub(merged_data[,2], 1, nchar(merged_data[,2])-1)
good_data <- subset(merged_data, grepl("(", merged_data$NAME, fixed=TRUE) == FALSE)
bad_data <- subset(merged_data, grepl("(", merged_data$NAME, fixed=TRUE) == TRUE)
names(grouped_df)[1] <- "District_Name"
names(good_data)[2] <- "District_Name"
df <- left_join(grouped_df, good_data, by = "District_Name")
View(bad_data)
View(grouped_df)
df <- df[,-11]
###################################################################
#
#   MATH 5530
#
#   Dylan Denner & Jackson Tucker
#   dd575213@ohio.edu & jt070017@ohio.edu
#   03/30/2021
#
#   Overview:
#   Assumption checks and corrections
#
###################################################################
# Working directory
setwd("C:/Users/dylan/Documents/R/MATH5530/Project/MATH5530/SCRIPTS/")
###################################################################
# Start program run time
start.time <- Sys.time()
###################################################################
# Libraries needed for analysis
library(dplyr)
library(tidycensus)
library(tidyverse)
library(tidyr)
library(readxl)
library(readr)
library(gridExtra)
library(ggpubr)
library(MASS)
library(car)
library(lmtest)
###################################################################
file_path <- "../DATA/model_data_3_30.csv"
model_data <- read.csv(file_path)
setwd("C:/Users/dylan/Documents/R/MATH5530/Project/MATH5530/SCRIPTS/")
library(dplyr)
library(tidycensus)
library(tidyverse)
library(tidyr)
library(readxl)
library(readr)
library(gridExtra)
library(ggpubr)
library(MASS)
library(car)
library(lmtest)
library(tidycensus)
poverty_by_sex_edu_attainment <- get_acs(
geography = "school district (unified)",
variables = c(total_population = "B17003_001",
below_poverty_num = "B17003_002",
below_poverty_num_men = "B17003_003",
M_below_poverty_less_than_HS = "B17003_004",
M_below_poverty_HS = "B17003_005",
M_below_poverty_some_college = "B17003_006",
M_below_poverty_bachelor_plus = "B17003_007",
below_poverty_num_women = "B17003_008",
W_below_poverty_less_than_HS = "B17003_009",
W_below_poverty_HS = "B17003_010",
W_below_poverty_some_college = "B17003_011",
W_below_poverty_bachelor_plus = "B17003_012",
above_poverty_num = "B17003_013",
above_poverty_num_men = "B17003_014",
M_above_poverty_less_than_HS = "B17003_015",
M_above_poverty_HS = "B17003_016",
M_above_poverty_some_college = "B17003_017",
M_above_poverty_bachelor_plus = "B17003_018",
above_poverty_num_women = "B17003_019",
W_above_poverty_less_than_HS = "B17003_020",
W_above_poverty_HS = "B17003_021",
W_above_poverty_some_college = "B17003_022",
W_above_poverty_bachelor_plus = "B17003_023"),
state = "OH",
year = 2019)
head(poverty_by_sex_edu_attainment)
dim(poverty_by_sex_edu_attainment)
length(unique(poverty_by_sex_edu_attainment$NAME))
poverty_by_sex_edu_attainment <- select(
poverty_by_sex_edu_attainment,
-"moe",
-"GEOID"
)
View(poverty_by_sex_edu_attainment)
poverty_by_sex_edu_attainment <- select(
poverty_by_sex_edu_attainment,
-"moe",
-"GEOID"
)
poverty_by_sex_edu_attainment <- select(
poverty_by_sex_edu_attainment,
-"moe",
-"GEOID"
)
